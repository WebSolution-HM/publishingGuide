<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML 작성 가이드</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <!-- header(헤더) 시작 -->
    <header class="js-header">
        <div class="header-wrap">
            <div class="left">
                <p>최종 작성자 <br>
                양미연 연구원</p>
            </div>
            <h1 class="title--site">퍼블리싱 작성 가이드</h1>
            <div class="right">
                <p>업데이트 날짜 <br>
                2025년  <br>
                08월 06일(수)</p>
            </div>
        </div>
    </header>
    <!-- //header(헤더) 끝 -->

    <!-- nav(네비게이션) 시작 -->
    <nav class="js-nav">
        <ul class="nav-wrap">
            <li><button class="active" type="button">HTML 작성 규칙</button></li>
            <li><button class="" type="button">CSS 작성 규칙</button></li>
        </ul>
    </nav>
    <!-- //nav(네비게이션) 끝 -->

    <!-- scroll indicator(스크롤 인디케이터) 시작 -->
    <aside class="scroll-indicator">
        <div class="scroll-indicator-wrap">
            <ul class="indicator--menu">
                <li><button class="active" type="button">클래스 네이밍</button></li>
                <li><button class="" type="button">스타일 순서</button></li>
                <li><button class="" type="button">스타일 파일</button></li>
                <li><button class="" type="button">mixin 4종</button></li>
            </ul>
            <div class="indicator--line"></div>
            <button class="btn--top">
                <img src="./image/btn--top.svg" alt="맨위로">
            </button>
        </div>
    </aside>
    <!-- //scroll indicator(스크롤 인디케이터) 끝 -->


    <!-- main(메인) 시작 -->
    <main class="js-main">
        <div class="main-wrap">
            <!-- 클래스 네이밍 리스트 시작 -->
            <ul class="ul--class-naming guide-li-wrap">
                <li class="guide-card js-guide-card">
                    <p class="title--guide">소문자 케밥케이스</p>
                    <div class="sample-code">
                        <img src="./image/css/img-sample1.png" alt="">
                    </div>
                </li>
                <li class="guide-card js-guide-card">
                    <p class="title--guide">class 네이밍 형식</p>
                    <div class="sample-code">
                        <img src="./image/css/img-sample2.png" alt="">
                        <ul class="description">
                            <li>.대상{}</li>
                            <li>.기능--대상/속성{}</li>
                        </ul>
                    </div>
                </li>
                <li class="guide-card js-guide-card">
                    <p class="title--guide">스크립트 클래스명 앞에 ‘js-’ 넣기</p>
                    <div class="sample-code">
                        <img src="./image/css/img-sample3.png" alt="">
                        <ul class="description">
                            <li>스크립트용 클래스에는 스타일을 주지 않음</li>
                        </ul>
                    </div>
                </li>
            </ul>
            <!-- //클래스 네이밍 리스트 끝 -->

            <!-- 스타일 순서 시작 -->
            <ul class="ul--style-order guide-li-wrap">
                <li class="guide-card js-guide-card">
                    <p class="title--guide">소문자 케밥케이스</p>
                    <div class="sample-code">
                        <img src="./image/css/img-sample1.png" alt="">
                    </div>
                </li>
                <li class="guide-card js-guide-card">
                    <p class="title--guide">class 네이밍 형식</p>
                    <div class="sample-code">
                        <img src="./image/css/img-sample2.png" alt="">
                        <ul class="description">
                            <li>.대상{}</li>
                            <li>.기능--대상/속성{}</li>
                        </ul>
                    </div>
                </li>
                <li class="guide-card js-guide-card">
                    <p class="title--guide">스크립트 클래스명 앞에 ‘js-’ 넣기</p>
                    <div class="sample-code">
                        <img src="./image/css/img-sample3.png" alt="">
                        <ul class="description">
                            <li>스크립트용 클래스에는 스타일을 주지 않음</li>
                        </ul>
                    </div>
                </li>
            </ul>
            <!-- //스타일 순서 끝 -->

            <ul class="ul--style-file guide-li-wrap">
                <li class="guide-card js-guide-card">
                    <p class="title--guide">소문자 케밥케이스</p>
                    <div class="sample-code">
                        <img src="./image/css/img-sample1.png" alt="">
                    </div>
                </li>
            </ul>
        </div>
    </main>
    <!-- //main(메인) 끝 -->

    <script>
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        //이전 카드 그룹의 마지막 카드 높이 + top + 여백
        //첫 카드의 시작 top을 이전 카드의 마지막 아래로 두기 위함
        function prevH(prevGroupCards) {
            const cardLast = prevGroupCards[prevGroupCards.length - 1];
            return cardLast.clientHeight + parseFloat(getComputedStyle(cardLast).top) + 50;
        }

        //main 높이를 구하기 위함
        const cardHArr = [];

        //카드들의 left, top 값 설정
        function setCardPositions(cardEls, isFirstGroup, prevGroupCards) {
            //left 값 랜덤 적용
            cardEls.forEach(card => {
                const randomL = getRandomInt(0, 30);
                card.style.left = `${randomL}vw`;
            });

            //DOM 반영 후 top 값 적용
            setTimeout(() => {
                cardEls.forEach((card, index) => {
                    if (index === 0) {
                        if (isFirstGroup) {
                            // 첫 번째 카드
                            const randomT = getRandomInt(50, 100);
                            card.style.top = `${randomT}px`;
                            cardHArr.push(randomT);
                        } else {
                            // 두 번째 이후 카드
                            const randomT = getRandomInt(100, 300);
                            const h = prevH(prevGroupCards);
                            card.style.top = `${randomT + h}px`;
                            cardHArr.push(randomT);
                        }
                    } else {
                        // 이전 카드 기준으로 top 계산
                        const prevCard = cardEls[index - 1];
                        const prevTop = parseFloat(prevCard.style.top);
                        const prevHeight = prevCard.clientHeight;
                        const spacing = getRandomInt(80, 250);
                        card.style.top = `${prevTop + prevHeight + spacing}px`;
                        cardHArr.push(prevTop + prevHeight + spacing);
                    }
                });
                console.log(cardHArr);

                // main 높이 계산
                const totalH = Math.max(...cardHArr) + 200; // 마지막 카드 아래 여백
                document.querySelector("main").style.height = `${totalH}px`;
            }, 10);
        }

        // 실행
        document.querySelectorAll(".guide-li-wrap").forEach((ul, ulIndex, ulArray) => {
            const cardEls = ul.querySelectorAll(".guide-card");
            const isFirstGroup = ulIndex === 0;
            const prevGroupCards = !isFirstGroup ? ulArray[ulIndex - 1].querySelectorAll(".guide-card") : null;

            setCardPositions(cardEls, isFirstGroup, prevGroupCards);
        });

        
    </script>
</body>
</html>